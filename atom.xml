<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>宝生的博客</title>
  
  
  <link href="https://liuios.github.io/atom.xml" rel="self"/>
  
  <link href="https://liuios.github.io/"/>
  <updated>2021-09-07T10:35:56.685Z</updated>
  <id>https://liuios.github.io/</id>
  
  <author>
    <name>刘宝生</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Mac sourcetree自动添加ssh key</title>
    <link href="https://liuios.github.io/2021/09/07/Mac-sourcetree%E8%87%AA%E5%8A%A8%E6%B7%BB%E5%8A%A0ssh-key/"/>
    <id>https://liuios.github.io/2021/09/07/Mac-sourcetree%E8%87%AA%E5%8A%A8%E6%B7%BB%E5%8A%A0ssh-key/</id>
    <published>2021-09-07T10:23:12.000Z</published>
    <updated>2021-09-07T10:35:56.685Z</updated>
    
    <content type="html"><![CDATA[<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">生成sshkey</span><br><span class="line">执行ssh-add ~/.ssh/id_rsa 将sshkey添加到sourceTree</span><br><span class="line">执行ssh-add -K ~/.ssh/id_rsa 将sshkey添加到钥匙串</span><br><span class="line">cd 到 .ssh目录下, 用touch config命令创建config文件</span><br><span class="line">执行open config, 打开config文件.</span><br><span class="line">输入下面的配置内容, 保存·config文件</span><br></pre></td></tr></table></figure><p>config</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Host *</span><br><span class="line">   UseKeychain yes</span><br><span class="line">   AddKeysToAgent yes</span><br><span class="line">   IdentityFile ~/.ssh/id_rsa</span><br><span class="line">   IdentityFile ~/.ssh/github_rsa</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span c</summary>
      
    
    
    
    <category term="技术" scheme="https://liuios.github.io/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
    <category term="SourceTree" scheme="https://liuios.github.io/tags/SourceTree/"/>
    
  </entry>
  
  <entry>
    <title>react-native修改第三方包</title>
    <link href="https://liuios.github.io/2021/09/07/react-native%E4%BF%AE%E6%94%B9%E7%AC%AC%E4%B8%89%E6%96%B9%E5%8C%85/"/>
    <id>https://liuios.github.io/2021/09/07/react-native%E4%BF%AE%E6%94%B9%E7%AC%AC%E4%B8%89%E6%96%B9%E5%8C%85/</id>
    <published>2021-09-07T10:18:07.583Z</published>
    <updated>2021-09-07T10:18:07.583Z</updated>
    
    <content type="html"><![CDATA[<p>使用第三方包的时候，经常需要修改内部源码来解决bug和实现效果，然而每次yarn、npm install之后，修改的代码又会被覆盖，让人抓狂，下面介绍一个好用的方法👇</p><p>使用工具：<a href="https://links.jianshu.com/go?to=https://github.com/ds300/patch-package">patch-package</a></p><h3 id="用法"><a href="#用法" class="headerlink" title="用法"></a>用法</h3><p>修改package.json,添加<code> &quot;postinstall&quot;: &quot;patch-package&quot;</code></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;android&quot;</span>: <span class="string">&quot;react-native run-android&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;ios&quot;</span>: <span class="string">&quot;react-native run-ios&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;start&quot;</span>: <span class="string">&quot;react-native start&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;test&quot;</span>: <span class="string">&quot;jest&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;lint&quot;</span>: <span class="string">&quot;eslint .&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;postinstall&quot;</span>: <span class="string">&quot;patch-package&quot;</span></span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure><p>执行 <code>yarn add patch-package postinstall-postinstall -D</code></p><p>修改第三方库后，</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npx patch-package [package-name] </span><br><span class="line">或</span><br><span class="line">yarn patch-package [package-name]</span><br></pre></td></tr></table></figure><p>应用补丁</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn patch-package</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;使用第三方包的时候，经常需要修改内部源码来解决bug和实现效果，然而每次yarn、npm install之后，修改的代码又会被覆盖，让人抓狂，下面介绍一个好用的方法👇&lt;/p&gt;
&lt;p&gt;使用工具：&lt;a href=&quot;https://links.jianshu.com/go?to</summary>
      
    
    
    
    <category term="技术" scheme="https://liuios.github.io/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
    <category term="react-native" scheme="https://liuios.github.io/tags/react-native/"/>
    
  </entry>
  
  <entry>
    <title>yarn的常用命令</title>
    <link href="https://liuios.github.io/2021/09/07/yarn%E7%9A%84%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/"/>
    <id>https://liuios.github.io/2021/09/07/yarn%E7%9A%84%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</id>
    <published>2021-09-07T09:27:54.000Z</published>
    <updated>2021-09-07T10:44:09.899Z</updated>
    
    <content type="html"><![CDATA[<h4 id="yarn-安装"><a href="#yarn-安装" class="headerlink" title="yarn 安装"></a>yarn 安装</h4><p><code>npm i yarn -g</code></p><h4 id="查看版本"><a href="#查看版本" class="headerlink" title="查看版本"></a>查看版本</h4><p><code>yarn -v</code></p><h4 id="新建-package-json"><a href="#新建-package-json" class="headerlink" title="新建 package.json"></a>新建 package.json</h4><p><code>yarn init</code></p><h4 id="添加依赖"><a href="#添加依赖" class="headerlink" title="添加依赖"></a>添加依赖</h4><p>通过 <code>yarn add</code> 添加依赖会更新 package.json 以及 yarn.lock 文件</p><h5 id="1-开发环境"><a href="#1-开发环境" class="headerlink" title="1.开发环境"></a>1.开发环境</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">yarn add &lt;packageName&gt; 依赖会记录在 package.json 的 dependencies 下 开发环境</span><br><span class="line"></span><br><span class="line">yarn add webpack@2.5 # yarn --save 是 yarn 默认的，默认记录在 package.json 中</span><br><span class="line"></span><br><span class="line">npm install webpack --save # npm</span><br></pre></td></tr></table></figure><h5 id="2-生产环境"><a href="#2-生产环境" class="headerlink" title="2.生产环境"></a>2.生产环境</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">yarn add &lt;packageName&gt; --dev 依赖会记录在 package.json 的 devDependencies 下 生产环境</span><br><span class="line"></span><br><span class="line">yarn add webpack --dev # yarn 简写 -D</span><br><span class="line"></span><br><span class="line">npm install webpack --save-dev # npm</span><br></pre></td></tr></table></figure><h5 id="3-全局"><a href="#3-全局" class="headerlink" title="3.全局"></a>3.全局</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">yarn global add &lt;packageName&gt; 全局安装依赖</span><br><span class="line"></span><br><span class="line">yarn global add webpack # yarn</span><br><span class="line"></span><br><span class="line">npm install webpack -g # npm</span><br></pre></td></tr></table></figure><h4 id="更新"><a href="#更新" class="headerlink" title="更新"></a>更新</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">yarn upgrade 用于更新包到基于规范范围的最新版本</span><br><span class="line"></span><br><span class="line">yarn upgrade # 升级所有依赖项，不记录在 package.json 中</span><br><span class="line"></span><br><span class="line">npm update # npm 可以通过 ‘--save|--save-dev’ 指定升级哪类依赖</span><br><span class="line"></span><br><span class="line">yarn upgrade webpack # 升级指定包</span><br><span class="line"></span><br><span class="line">npm update webpack --save-dev # npm</span><br><span class="line"></span><br><span class="line">yarn upgrade --latest # 忽略版本规则，升级到最新版本，并且更新 package.json</span><br></pre></td></tr></table></figure><h4 id="移除"><a href="#移除" class="headerlink" title="移除"></a>移除</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">yarn remove &lt;packageName&gt;</span><br><span class="line"></span><br><span class="line">yarn remove webpack # yarn</span><br><span class="line"></span><br><span class="line">npm uninstall webpack --save # npm 可以指定 --save | --save-dev</span><br></pre></td></tr></table></figure><h4 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">yarn 或者 yarn install</span><br><span class="line"></span><br><span class="line">yarn install # 或者 yarn 在 node_modules 目录安装 package.json 中列出的所有依赖</span><br><span class="line"></span><br><span class="line">npm install # npm</span><br><span class="line"></span><br><span class="line">yarn install 安装时，如果 node_modules 中有相应的包则不会重新下载 --force 可以强制重新下载安装</span><br><span class="line"></span><br><span class="line">yarn install --force # 强制下载安装</span><br><span class="line"></span><br><span class="line">npm install --force # npm</span><br></pre></td></tr></table></figure><h4 id="运行脚本"><a href="#运行脚本" class="headerlink" title="运行脚本"></a>运行脚本</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">yarn run 用来执行在 package.json 中 scripts 属性下定义的脚本</span><br><span class="line"></span><br><span class="line">// package.json</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  &quot;scripts&quot;: &#123;</span><br><span class="line">  &quot;dev&quot;: &quot;node app.js&quot;,</span><br><span class="line">  &quot;start&quot;: &quot;node app.js&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">yarn run dev # yarn 执行 dev 对应的脚本 node app.js</span><br><span class="line"></span><br><span class="line">npm run # npm</span><br><span class="line"></span><br><span class="line">yarn start # yarn</span><br><span class="line"></span><br><span class="line">npm start # npm</span><br><span class="line"></span><br><span class="line">与 npm 一样 可以有 yarn start 和 yarn test 两个简写的运行脚本方式</span><br></pre></td></tr></table></figure><h4 id="显示包信息"><a href="#显示包信息" class="headerlink" title="显示包信息"></a>显示包信息</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">yarn info &lt;packageName&gt; 可以用来查看某个模块的最新版本信息</span><br><span class="line"></span><br><span class="line">yarn info webpack # yarn</span><br><span class="line"></span><br><span class="line">npm info webpack # npm</span><br><span class="line"></span><br><span class="line">yarn info webpack --json # 输出 json 格式</span><br><span class="line"></span><br><span class="line">npm info webpack --json # npm</span><br><span class="line"></span><br><span class="line">yarn info webpack readme # 输出 README 部分</span><br><span class="line"></span><br><span class="line">npm info webpack readme</span><br></pre></td></tr></table></figure><h4 id="列出所有依赖"><a href="#列出所有依赖" class="headerlink" title="列出所有依赖"></a>列出所有依赖</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">yarn list</span><br><span class="line"></span><br><span class="line">yarn list # 列出当前项目的依赖</span><br><span class="line"></span><br><span class="line">npm list # npm</span><br><span class="line"></span><br><span class="line">yarn list --depth=0 # 限制依赖的深度</span><br><span class="line"></span><br><span class="line">sudo yarn global list # 列出全局安装的模块</span><br></pre></td></tr></table></figure><h4 id="管理-yarn-配置文件"><a href="#管理-yarn-配置文件" class="headerlink" title="管理 yarn 配置文件"></a>管理 yarn 配置文件</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">yarn coinfig</span><br><span class="line"></span><br><span class="line">yarn config set key value # 设置</span><br><span class="line"></span><br><span class="line">npm config set key value</span><br><span class="line"></span><br><span class="line">yarn config get key # 读取值</span><br><span class="line"></span><br><span class="line">npm config get key</span><br><span class="line"></span><br><span class="line">yarn config delete key # 删除</span><br><span class="line"></span><br><span class="line">npm config delete key</span><br><span class="line"></span><br><span class="line">yarn config list # 显示当前配置</span><br><span class="line"></span><br><span class="line">npm config list</span><br><span class="line"></span><br><span class="line">yarn config set registry https://registry.npm.taobao.org # 设置淘宝镜像</span><br><span class="line"></span><br><span class="line">npm config set registry https://registry.npm.taobao.org # npm</span><br></pre></td></tr></table></figure><h4 id="缓存"><a href="#缓存" class="headerlink" title="缓存"></a>缓存</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">yarn cache</span><br><span class="line"></span><br><span class="line">sudo yarn cache list # 列出已缓存的每个包</span><br><span class="line"></span><br><span class="line">sudo yarn cache dir # 返回 全局缓存位置</span><br><span class="line"></span><br><span class="line">sudo yarn cache clean # 清除缓存</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h4 id=&quot;yarn-安装&quot;&gt;&lt;a href=&quot;#yarn-安装&quot; class=&quot;headerlink&quot; title=&quot;yarn 安装&quot;&gt;&lt;/a&gt;yarn 安装&lt;/h4&gt;&lt;p&gt;&lt;code&gt;npm i yarn -g&lt;/code&gt;&lt;/p&gt;
&lt;h4 id=&quot;查看版本&quot;&gt;&lt;a hr</summary>
      
    
    
    
    <category term="技术" scheme="https://liuios.github.io/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
    <category term="yarn" scheme="https://liuios.github.io/tags/yarn/"/>
    
  </entry>
  
  <entry>
    <title>iOS 开发解决dyld: Library not loaded: @rpath/xxx.framework/ </title>
    <link href="https://liuios.github.io/2021/09/07/iOS-%E5%BC%80%E5%8F%91%E8%A7%A3%E5%86%B3dyld-Library-not-loaded-rpath-xxx-framework/"/>
    <id>https://liuios.github.io/2021/09/07/iOS-%E5%BC%80%E5%8F%91%E8%A7%A3%E5%86%B3dyld-Library-not-loaded-rpath-xxx-framework/</id>
    <published>2021-09-07T09:06:20.000Z</published>
    <updated>2021-09-07T10:18:07.581Z</updated>
    
    <content type="html"><![CDATA[<p>最近使用百度人脸采集 sdk 时运行报错</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ld: Library not loaded: @rpath/xxx.framework/</span><br><span class="line">...</span><br><span class="line">reason: image not found</span><br></pre></td></tr></table></figure><h3 id="解决办法"><a href="#解决办法" class="headerlink" title="解决办法"></a>解决办法</h3><p><img src="https://cdn.jsdelivr.net/gh/LiuIos/picBed/20210907171430.png"></p><p><img src="https://cdn.jsdelivr.net/gh/LiuIos/picBed/ttttt.png"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;最近使用百度人脸采集 sdk 时运行报错&lt;/p&gt;
&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span clas</summary>
      
    
    
    
    <category term="技术" scheme="https://liuios.github.io/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
    <category term="iOS" scheme="https://liuios.github.io/tags/iOS/"/>
    
  </entry>
  
  <entry>
    <title>react-native-webview禁止缩放和自适应高度</title>
    <link href="https://liuios.github.io/2021/09/07/react-native-webview%E7%A6%81%E6%AD%A2%E7%BC%A9%E6%94%BE%E5%92%8C%E8%87%AA%E9%80%82%E5%BA%94%E9%AB%98%E5%BA%A6/"/>
    <id>https://liuios.github.io/2021/09/07/react-native-webview%E7%A6%81%E6%AD%A2%E7%BC%A9%E6%94%BE%E5%92%8C%E8%87%AA%E9%80%82%E5%BA%94%E9%AB%98%E5%BA%A6/</id>
    <published>2021-09-07T08:04:33.000Z</published>
    <updated>2021-09-07T10:18:07.582Z</updated>
    
    <content type="html"><![CDATA[<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> BaseScript = <span class="string">`</span></span><br><span class="line"><span class="string">    (function () &#123;</span></span><br><span class="line"><span class="string">        var height = null;</span></span><br><span class="line"><span class="string">        function changeHeight() &#123;</span></span><br><span class="line"><span class="string">          if (document.body.scrollHeight != height) &#123;</span></span><br><span class="line"><span class="string">            height = document.body.scrollHeight;</span></span><br><span class="line"><span class="string">            if (window.ReactNativeWebView.postMessage) &#123;</span></span><br><span class="line"><span class="string">              window.ReactNativeWebView.postMessage(JSON.stringify(&#123;</span></span><br><span class="line"><span class="string">                type: &#x27;setHeight&#x27;,</span></span><br><span class="line"><span class="string">                height: height,</span></span><br><span class="line"><span class="string">              &#125;))</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">          &#125;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">        setTimeout(changeHeight, 100);</span></span><br><span class="line"><span class="string">        const meta = document.createElement(&#x27;meta&#x27;);</span></span><br><span class="line"><span class="string">        meta.setAttribute(&#x27;content&#x27;, &#x27;initial-scale=1, maximum-scale=1, user-scalable=0&#x27;);</span></span><br><span class="line"><span class="string">        meta.setAttribute(&#x27;name&#x27;, &#x27;viewport&#x27;);</span></span><br><span class="line"><span class="string">        document.getElementsByTagName(&#x27;head&#x27;)[0].appendChild(meta);</span></span><br><span class="line"><span class="string">    &#125; ())</span></span><br><span class="line"><span class="string">    `</span>;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">   * web端发送过来的交互消息</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="function"><span class="title">onMessage</span>(<span class="params">event</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> action = <span class="built_in">JSON</span>.parse(event.nativeEvent.data);</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;====================================&#x27;</span>);</span><br><span class="line">      <span class="built_in">console</span>.log(action);</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;====================================&#x27;</span>);</span><br><span class="line">      <span class="keyword">if</span> (action.type === <span class="string">&#x27;setHeight&#x27;</span> &amp;&amp; action.height &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="built_in">this</span>.setState(&#123;<span class="attr">height</span>: action.height&#125;);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">      <span class="comment">// pass</span></span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;====================================&#x27;</span>);</span><br><span class="line">      <span class="built_in">console</span>.log(error);</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;====================================&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;WebView ref=&#123;<span class="function"><span class="params">e</span> =&gt;</span> (<span class="built_in">this</span>.webView = e)&#125;</span><br><span class="line">injectedJavaScript=&#123;BaseScript&#125;/&gt;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;l</summary>
      
    
    
    
    <category term="技术" scheme="https://liuios.github.io/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
    <category term="react-native" scheme="https://liuios.github.io/tags/react-native/"/>
    
  </entry>
  
</feed>
