<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Mac sourcetreeè‡ªåŠ¨æ·»åŠ ssh key</title>
      <link href="/2021/09/07/Mac-sourcetree%E8%87%AA%E5%8A%A8%E6%B7%BB%E5%8A%A0ssh-key/"/>
      <url>/2021/09/07/Mac-sourcetree%E8%87%AA%E5%8A%A8%E6%B7%BB%E5%8A%A0ssh-key/</url>
      
        <content type="html"><![CDATA[<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ç”Ÿæˆsshkey</span><br><span class="line">æ‰§è¡Œssh-add ~/.ssh/id_rsa å°†sshkeyæ·»åŠ åˆ°sourceTree</span><br><span class="line">æ‰§è¡Œssh-add -K ~/.ssh/id_rsa å°†sshkeyæ·»åŠ åˆ°é’¥åŒ™ä¸²</span><br><span class="line">cd åˆ° .sshç›®å½•ä¸‹, ç”¨touch configå‘½ä»¤åˆ›å»ºconfigæ–‡ä»¶</span><br><span class="line">æ‰§è¡Œopen config, æ‰“å¼€configæ–‡ä»¶.</span><br><span class="line">è¾“å…¥ä¸‹é¢çš„é…ç½®å†…å®¹, ä¿å­˜Â·configæ–‡ä»¶</span><br></pre></td></tr></table></figure><p>config</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Host *</span><br><span class="line">   UseKeychain yes</span><br><span class="line">   AddKeysToAgent yes</span><br><span class="line">   IdentityFile ~/.ssh/id_rsa</span><br><span class="line">   IdentityFile ~/.ssh/github_rsa</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SourceTree </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>react-nativeä¿®æ”¹ç¬¬ä¸‰æ–¹åŒ…</title>
      <link href="/2021/09/07/react-native%E4%BF%AE%E6%94%B9%E7%AC%AC%E4%B8%89%E6%96%B9%E5%8C%85/"/>
      <url>/2021/09/07/react-native%E4%BF%AE%E6%94%B9%E7%AC%AC%E4%B8%89%E6%96%B9%E5%8C%85/</url>
      
        <content type="html"><![CDATA[<p>ä½¿ç”¨ç¬¬ä¸‰æ–¹åŒ…çš„æ—¶å€™ï¼Œç»å¸¸éœ€è¦ä¿®æ”¹å†…éƒ¨æºç æ¥è§£å†³bugå’Œå®ç°æ•ˆæœï¼Œç„¶è€Œæ¯æ¬¡yarnã€npm installä¹‹åï¼Œä¿®æ”¹çš„ä»£ç åˆä¼šè¢«è¦†ç›–ï¼Œè®©äººæŠ“ç‹‚ï¼Œä¸‹é¢ä»‹ç»ä¸€ä¸ªå¥½ç”¨çš„æ–¹æ³•ğŸ‘‡</p><p>ä½¿ç”¨å·¥å…·ï¼š<a href="https://links.jianshu.com/go?to=https://github.com/ds300/patch-package">patch-package</a></p><h3 id="ç”¨æ³•"><a href="#ç”¨æ³•" class="headerlink" title="ç”¨æ³•"></a>ç”¨æ³•</h3><p>ä¿®æ”¹package.json,æ·»åŠ <code> &quot;postinstall&quot;: &quot;patch-package&quot;</code></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;android&quot;</span>: <span class="string">&quot;react-native run-android&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;ios&quot;</span>: <span class="string">&quot;react-native run-ios&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;start&quot;</span>: <span class="string">&quot;react-native start&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;test&quot;</span>: <span class="string">&quot;jest&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;lint&quot;</span>: <span class="string">&quot;eslint .&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;postinstall&quot;</span>: <span class="string">&quot;patch-package&quot;</span></span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œ <code>yarn add patch-package postinstall-postinstall -D</code></p><p>ä¿®æ”¹ç¬¬ä¸‰æ–¹åº“åï¼Œ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npx patch-package [package-name] </span><br><span class="line">æˆ–</span><br><span class="line">yarn patch-package [package-name]</span><br></pre></td></tr></table></figure><p>åº”ç”¨è¡¥ä¸</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn patch-package</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> react-native </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>yarnçš„å¸¸ç”¨å‘½ä»¤</title>
      <link href="/2021/09/07/yarn%E7%9A%84%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/"/>
      <url>/2021/09/07/yarn%E7%9A%84%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</url>
      
        <content type="html"><![CDATA[<h4 id="yarn-å®‰è£…"><a href="#yarn-å®‰è£…" class="headerlink" title="yarn å®‰è£…"></a>yarn å®‰è£…</h4><p><code>npm i yarn -g</code></p><h4 id="æŸ¥çœ‹ç‰ˆæœ¬"><a href="#æŸ¥çœ‹ç‰ˆæœ¬" class="headerlink" title="æŸ¥çœ‹ç‰ˆæœ¬"></a>æŸ¥çœ‹ç‰ˆæœ¬</h4><p><code>yarn -v</code></p><h4 id="æ–°å»º-package-json"><a href="#æ–°å»º-package-json" class="headerlink" title="æ–°å»º package.json"></a>æ–°å»º package.json</h4><p><code>yarn init</code></p><h4 id="æ·»åŠ ä¾èµ–"><a href="#æ·»åŠ ä¾èµ–" class="headerlink" title="æ·»åŠ ä¾èµ–"></a>æ·»åŠ ä¾èµ–</h4><p>é€šè¿‡ <code>yarn add</code> æ·»åŠ ä¾èµ–ä¼šæ›´æ–° package.json ä»¥åŠ yarn.lock æ–‡ä»¶</p><h5 id="1-å¼€å‘ç¯å¢ƒ"><a href="#1-å¼€å‘ç¯å¢ƒ" class="headerlink" title="1.å¼€å‘ç¯å¢ƒ"></a>1.å¼€å‘ç¯å¢ƒ</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">yarn add &lt;packageName&gt; ä¾èµ–ä¼šè®°å½•åœ¨ package.json çš„ dependencies ä¸‹ å¼€å‘ç¯å¢ƒ</span><br><span class="line"></span><br><span class="line">yarn add webpack@2.5 # yarn --save æ˜¯ yarn é»˜è®¤çš„ï¼Œé»˜è®¤è®°å½•åœ¨ package.json ä¸­</span><br><span class="line"></span><br><span class="line">npm install webpack --save # npm</span><br></pre></td></tr></table></figure><h5 id="2-ç”Ÿäº§ç¯å¢ƒ"><a href="#2-ç”Ÿäº§ç¯å¢ƒ" class="headerlink" title="2.ç”Ÿäº§ç¯å¢ƒ"></a>2.ç”Ÿäº§ç¯å¢ƒ</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">yarn add &lt;packageName&gt; --dev ä¾èµ–ä¼šè®°å½•åœ¨ package.json çš„ devDependencies ä¸‹ ç”Ÿäº§ç¯å¢ƒ</span><br><span class="line"></span><br><span class="line">yarn add webpack --dev # yarn ç®€å†™ -D</span><br><span class="line"></span><br><span class="line">npm install webpack --save-dev # npm</span><br></pre></td></tr></table></figure><h5 id="3-å…¨å±€"><a href="#3-å…¨å±€" class="headerlink" title="3.å…¨å±€"></a>3.å…¨å±€</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">yarn global add &lt;packageName&gt; å…¨å±€å®‰è£…ä¾èµ–</span><br><span class="line"></span><br><span class="line">yarn global add webpack # yarn</span><br><span class="line"></span><br><span class="line">npm install webpack -g # npm</span><br></pre></td></tr></table></figure><h4 id="æ›´æ–°"><a href="#æ›´æ–°" class="headerlink" title="æ›´æ–°"></a>æ›´æ–°</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">yarn upgrade ç”¨äºæ›´æ–°åŒ…åˆ°åŸºäºè§„èŒƒèŒƒå›´çš„æœ€æ–°ç‰ˆæœ¬</span><br><span class="line"></span><br><span class="line">yarn upgrade # å‡çº§æ‰€æœ‰ä¾èµ–é¡¹ï¼Œä¸è®°å½•åœ¨ package.json ä¸­</span><br><span class="line"></span><br><span class="line">npm update # npm å¯ä»¥é€šè¿‡ â€˜--save|--save-devâ€™ æŒ‡å®šå‡çº§å“ªç±»ä¾èµ–</span><br><span class="line"></span><br><span class="line">yarn upgrade webpack # å‡çº§æŒ‡å®šåŒ…</span><br><span class="line"></span><br><span class="line">npm update webpack --save-dev # npm</span><br><span class="line"></span><br><span class="line">yarn upgrade --latest # å¿½ç•¥ç‰ˆæœ¬è§„åˆ™ï¼Œå‡çº§åˆ°æœ€æ–°ç‰ˆæœ¬ï¼Œå¹¶ä¸”æ›´æ–° package.json</span><br></pre></td></tr></table></figure><h4 id="ç§»é™¤"><a href="#ç§»é™¤" class="headerlink" title="ç§»é™¤"></a>ç§»é™¤</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">yarn remove &lt;packageName&gt;</span><br><span class="line"></span><br><span class="line">yarn remove webpack # yarn</span><br><span class="line"></span><br><span class="line">npm uninstall webpack --save # npm å¯ä»¥æŒ‡å®š --save | --save-dev</span><br></pre></td></tr></table></figure><h4 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">yarn æˆ–è€… yarn install</span><br><span class="line"></span><br><span class="line">yarn install # æˆ–è€… yarn åœ¨ node_modules ç›®å½•å®‰è£… package.json ä¸­åˆ—å‡ºçš„æ‰€æœ‰ä¾èµ–</span><br><span class="line"></span><br><span class="line">npm install # npm</span><br><span class="line"></span><br><span class="line">yarn install å®‰è£…æ—¶ï¼Œå¦‚æœ node_modules ä¸­æœ‰ç›¸åº”çš„åŒ…åˆ™ä¸ä¼šé‡æ–°ä¸‹è½½ --force å¯ä»¥å¼ºåˆ¶é‡æ–°ä¸‹è½½å®‰è£…</span><br><span class="line"></span><br><span class="line">yarn install --force # å¼ºåˆ¶ä¸‹è½½å®‰è£…</span><br><span class="line"></span><br><span class="line">npm install --force # npm</span><br></pre></td></tr></table></figure><h4 id="è¿è¡Œè„šæœ¬"><a href="#è¿è¡Œè„šæœ¬" class="headerlink" title="è¿è¡Œè„šæœ¬"></a>è¿è¡Œè„šæœ¬</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">yarn run ç”¨æ¥æ‰§è¡Œåœ¨ package.json ä¸­ scripts å±æ€§ä¸‹å®šä¹‰çš„è„šæœ¬</span><br><span class="line"></span><br><span class="line">// package.json</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  &quot;scripts&quot;: &#123;</span><br><span class="line">  &quot;dev&quot;: &quot;node app.js&quot;,</span><br><span class="line">  &quot;start&quot;: &quot;node app.js&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">yarn run dev # yarn æ‰§è¡Œ dev å¯¹åº”çš„è„šæœ¬ node app.js</span><br><span class="line"></span><br><span class="line">npm run # npm</span><br><span class="line"></span><br><span class="line">yarn start # yarn</span><br><span class="line"></span><br><span class="line">npm start # npm</span><br><span class="line"></span><br><span class="line">ä¸ npm ä¸€æ · å¯ä»¥æœ‰ yarn start å’Œ yarn test ä¸¤ä¸ªç®€å†™çš„è¿è¡Œè„šæœ¬æ–¹å¼</span><br></pre></td></tr></table></figure><h4 id="æ˜¾ç¤ºåŒ…ä¿¡æ¯"><a href="#æ˜¾ç¤ºåŒ…ä¿¡æ¯" class="headerlink" title="æ˜¾ç¤ºåŒ…ä¿¡æ¯"></a>æ˜¾ç¤ºåŒ…ä¿¡æ¯</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">yarn info &lt;packageName&gt; å¯ä»¥ç”¨æ¥æŸ¥çœ‹æŸä¸ªæ¨¡å—çš„æœ€æ–°ç‰ˆæœ¬ä¿¡æ¯</span><br><span class="line"></span><br><span class="line">yarn info webpack # yarn</span><br><span class="line"></span><br><span class="line">npm info webpack # npm</span><br><span class="line"></span><br><span class="line">yarn info webpack --json # è¾“å‡º json æ ¼å¼</span><br><span class="line"></span><br><span class="line">npm info webpack --json # npm</span><br><span class="line"></span><br><span class="line">yarn info webpack readme # è¾“å‡º README éƒ¨åˆ†</span><br><span class="line"></span><br><span class="line">npm info webpack readme</span><br></pre></td></tr></table></figure><h4 id="åˆ—å‡ºæ‰€æœ‰ä¾èµ–"><a href="#åˆ—å‡ºæ‰€æœ‰ä¾èµ–" class="headerlink" title="åˆ—å‡ºæ‰€æœ‰ä¾èµ–"></a>åˆ—å‡ºæ‰€æœ‰ä¾èµ–</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">yarn list</span><br><span class="line"></span><br><span class="line">yarn list # åˆ—å‡ºå½“å‰é¡¹ç›®çš„ä¾èµ–</span><br><span class="line"></span><br><span class="line">npm list # npm</span><br><span class="line"></span><br><span class="line">yarn list --depth=0 # é™åˆ¶ä¾èµ–çš„æ·±åº¦</span><br><span class="line"></span><br><span class="line">sudo yarn global list # åˆ—å‡ºå…¨å±€å®‰è£…çš„æ¨¡å—</span><br></pre></td></tr></table></figure><h4 id="ç®¡ç†-yarn-é…ç½®æ–‡ä»¶"><a href="#ç®¡ç†-yarn-é…ç½®æ–‡ä»¶" class="headerlink" title="ç®¡ç† yarn é…ç½®æ–‡ä»¶"></a>ç®¡ç† yarn é…ç½®æ–‡ä»¶</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">yarn coinfig</span><br><span class="line"></span><br><span class="line">yarn config set key value # è®¾ç½®</span><br><span class="line"></span><br><span class="line">npm config set key value</span><br><span class="line"></span><br><span class="line">yarn config get key # è¯»å–å€¼</span><br><span class="line"></span><br><span class="line">npm config get key</span><br><span class="line"></span><br><span class="line">yarn config delete key # åˆ é™¤</span><br><span class="line"></span><br><span class="line">npm config delete key</span><br><span class="line"></span><br><span class="line">yarn config list # æ˜¾ç¤ºå½“å‰é…ç½®</span><br><span class="line"></span><br><span class="line">npm config list</span><br><span class="line"></span><br><span class="line">yarn config set registry https://registry.npm.taobao.org # è®¾ç½®æ·˜å®é•œåƒ</span><br><span class="line"></span><br><span class="line">npm config set registry https://registry.npm.taobao.org # npm</span><br></pre></td></tr></table></figure><h4 id="ç¼“å­˜"><a href="#ç¼“å­˜" class="headerlink" title="ç¼“å­˜"></a>ç¼“å­˜</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">yarn cache</span><br><span class="line"></span><br><span class="line">sudo yarn cache list # åˆ—å‡ºå·²ç¼“å­˜çš„æ¯ä¸ªåŒ…</span><br><span class="line"></span><br><span class="line">sudo yarn cache dir # è¿”å› å…¨å±€ç¼“å­˜ä½ç½®</span><br><span class="line"></span><br><span class="line">sudo yarn cache clean # æ¸…é™¤ç¼“å­˜</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> yarn </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>iOS å¼€å‘è§£å†³dyld: Library not loaded: @rpath/xxx.framework/ </title>
      <link href="/2021/09/07/iOS-%E5%BC%80%E5%8F%91%E8%A7%A3%E5%86%B3dyld-Library-not-loaded-rpath-xxx-framework/"/>
      <url>/2021/09/07/iOS-%E5%BC%80%E5%8F%91%E8%A7%A3%E5%86%B3dyld-Library-not-loaded-rpath-xxx-framework/</url>
      
        <content type="html"><![CDATA[<p>æœ€è¿‘ä½¿ç”¨ç™¾åº¦äººè„¸é‡‡é›† sdk æ—¶è¿è¡ŒæŠ¥é”™</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ld: Library not loaded: @rpath/xxx.framework/</span><br><span class="line">...</span><br><span class="line">reason: image not found</span><br></pre></td></tr></table></figure><h3 id="è§£å†³åŠæ³•"><a href="#è§£å†³åŠæ³•" class="headerlink" title="è§£å†³åŠæ³•"></a>è§£å†³åŠæ³•</h3><p><img src="https://cdn.jsdelivr.net/gh/LiuIos/picBed/20210907171430.png"></p><p><img src="https://cdn.jsdelivr.net/gh/LiuIos/picBed/ttttt.png"></p>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> iOS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>react-native-webviewç¦æ­¢ç¼©æ”¾å’Œè‡ªé€‚åº”é«˜åº¦</title>
      <link href="/2021/09/07/react-native-webview%E7%A6%81%E6%AD%A2%E7%BC%A9%E6%94%BE%E5%92%8C%E8%87%AA%E9%80%82%E5%BA%94%E9%AB%98%E5%BA%A6/"/>
      <url>/2021/09/07/react-native-webview%E7%A6%81%E6%AD%A2%E7%BC%A9%E6%94%BE%E5%92%8C%E8%87%AA%E9%80%82%E5%BA%94%E9%AB%98%E5%BA%A6/</url>
      
        <content type="html"><![CDATA[<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> BaseScript = <span class="string">`</span></span><br><span class="line"><span class="string">    (function () &#123;</span></span><br><span class="line"><span class="string">        var height = null;</span></span><br><span class="line"><span class="string">        function changeHeight() &#123;</span></span><br><span class="line"><span class="string">          if (document.body.scrollHeight != height) &#123;</span></span><br><span class="line"><span class="string">            height = document.body.scrollHeight;</span></span><br><span class="line"><span class="string">            if (window.ReactNativeWebView.postMessage) &#123;</span></span><br><span class="line"><span class="string">              window.ReactNativeWebView.postMessage(JSON.stringify(&#123;</span></span><br><span class="line"><span class="string">                type: &#x27;setHeight&#x27;,</span></span><br><span class="line"><span class="string">                height: height,</span></span><br><span class="line"><span class="string">              &#125;))</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">          &#125;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">        setTimeout(changeHeight, 100);</span></span><br><span class="line"><span class="string">        const meta = document.createElement(&#x27;meta&#x27;);</span></span><br><span class="line"><span class="string">        meta.setAttribute(&#x27;content&#x27;, &#x27;initial-scale=1, maximum-scale=1, user-scalable=0&#x27;);</span></span><br><span class="line"><span class="string">        meta.setAttribute(&#x27;name&#x27;, &#x27;viewport&#x27;);</span></span><br><span class="line"><span class="string">        document.getElementsByTagName(&#x27;head&#x27;)[0].appendChild(meta);</span></span><br><span class="line"><span class="string">    &#125; ())</span></span><br><span class="line"><span class="string">    `</span>;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">   * webç«¯å‘é€è¿‡æ¥çš„äº¤äº’æ¶ˆæ¯</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="function"><span class="title">onMessage</span>(<span class="params">event</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> action = <span class="built_in">JSON</span>.parse(event.nativeEvent.data);</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;====================================&#x27;</span>);</span><br><span class="line">      <span class="built_in">console</span>.log(action);</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;====================================&#x27;</span>);</span><br><span class="line">      <span class="keyword">if</span> (action.type === <span class="string">&#x27;setHeight&#x27;</span> &amp;&amp; action.height &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="built_in">this</span>.setState(&#123;<span class="attr">height</span>: action.height&#125;);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">      <span class="comment">// pass</span></span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;====================================&#x27;</span>);</span><br><span class="line">      <span class="built_in">console</span>.log(error);</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;====================================&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;WebView ref=&#123;<span class="function"><span class="params">e</span> =&gt;</span> (<span class="built_in">this</span>.webView = e)&#125;</span><br><span class="line">injectedJavaScript=&#123;BaseScript&#125;/&gt;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> react-native </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
